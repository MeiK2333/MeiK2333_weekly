<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://weekly.meik2333.com/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://weekly.meik2333.com/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://weekly.meik2333.com/css/github.min.css' />
    <link rel="stylesheet" href='https://weekly.meik2333.com/css/github-style.css' />
    <link rel="stylesheet" href='https://weekly.meik2333.com/css/light.css' />
    <link rel="stylesheet" href='https://weekly.meik2333.com/css/dark.css' />
    <link rel="stylesheet" href='https://weekly.meik2333.com/css/syntax.css' />
    <title>每周分享第 11 期 - MeiK&#39;s blog</title>
    <link rel="icon" type="image/x-icon" href='https://weekly.meik2333.com/images/favicon.ico'>
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="记录我过去一周看到的值得分享的东西，每周四发布。
" />
<meta name="keywords"
  content='' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://weekly.meik2333.com/post/weekly11/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="每周分享第 11 期 - MeiK&#39;s blog" />
<meta name="twitter:description"
  content="记录我过去一周看到的值得分享的东西，每周四发布。
" />
<meta name="twitter:site" content="https://weekly.meik2333.com/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://weekly.meik2333.com/">


<meta property="og:type" content="article" />
<meta property="og:title" content="每周分享第 11 期 - MeiK&#39;s blog">
<meta property="og:description"
  content="记录我过去一周看到的值得分享的东西，每周四发布。
" />
<meta property="og:url" content="https://weekly.meik2333.com/post/weekly11/" />
<meta property="og:site_name" content="每周分享第 11 期" />
<meta property="og:image"
  content="https://weekly.meik2333.com/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2019-01-10 19:53:15 &#43;0000 UTC" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://weekly.meik2333.com/">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://weekly.meik2333.com/">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://weekly.meik2333.com/">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://weekly.meik2333.com/">
                  <img class=" avatar-user"
                    src="https://weekly.meik2333.com/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://weekly.meik2333.com/">MeiK</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://weekly.meik2333.com/post/weekly11/">每周分享第 11 期</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Thu, 10 Jan 2019 19:53:15 &#43;0000"
                    class="no-wrap">
                    Thu, 10 Jan 2019 19:53:15 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Fri, 11 Oct 2019 20:47:09 &#43;0800"
                    class="no-wrap">
                    Fri, 11 Oct 2019 20:47:09 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div class="file-header d-flex flex-md-items-center flex-items-start">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    1650 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5">
                <article class="markdown-body entry-content container-lg"><p>记录我过去一周看到的值得分享的东西，每周四发布。</p>

<h2 id="随笔">随笔</h2>

<h3 id="坚持一件事有多难">坚持一件事有多难</h3>

<p>我当初立志每周写一篇分享，这才过了不到三个月，就已经 delay 两回了……</p>

<p>坚持做一件事说难也难，总有各种各样的事情突然出现延误了计划；说简单也简单，比如我坚持每天吃饭睡觉已经二十多年了……</p>

<p>希望我之后能尽可能的坚持下来吧。</p>

<h3 id="那个受用户喜爱的百度已经回来了-https-www-v2ex-com-t-524524"><a href="https://www.v2ex.com/t/524524">那个受用户喜爱的百度已经回来了！</a></h3>

<p>百度：真香！</p>

<h3 id="疯狂扩张的瑞幸咖啡">疯狂扩张的瑞幸咖啡</h3>

<p>在刚刚过去的 2018 年，瑞幸咖啡疯狂烧钱扩张，平时上网总能看到关于瑞幸咖啡的新闻。但令我感到奇怪的是：绝大部分新闻都不看好瑞幸咖啡。最令我感到奇怪的是：不看好瑞幸咖啡的新闻们，彼此之间相似度极高，总是用同样的几个论据来写文章。</p>

<p>我和瑞幸咖啡没有任何利益关系，只是一个感觉他们咖啡还挺好喝的吃瓜群众。瑞幸咖啡在 2019 年是成功也好，倒闭也好，说实话和我关系不大。但当时 ofo 受到了那么多的关注和支持，最后还是倒了。</p>

<p>所以得出结论：写文章的那批人其实都是复读机，第一个人怎么写他们就怎么写。</p>

<h2 id="新闻">新闻</h2>

<h3 id="github-宣布为免费用户提供个人仓库功能-https-blog-github-com-2019-01-07-new-year-new-github"><a href="https://blog.github.com/2019-01-07-new-year-new-github/">GitHub 宣布为免费用户提供个人仓库功能</a></h3>

<p>GitHub 宣布免费用户可以创建无上限个私有仓库，与付费的私有仓库相比，免费的私有仓库最多只能添加三个协作者。</p>

<p>论坛里，机智的网友们已经开发出了 GitHub 的网盘功能。coding 和 gitee 瑟瑟发抖。</p>

<h3 id="github-添加当前状态标签">GitHub 添加当前状态标签</h3>

<p>GitHub 添加了状态标签，用户可以标记自己的状态，比如：工作中、度假中、生病了等等。如果设置了自己的状态为 Busy 的话，那么其他人在提及自己或者分配任务的时候就可以看到自己的状态。</p>

<h2 id="技术杂谈">技术杂谈</h2>

<h3 id="反向代理下的静态资源缓存">反向代理下的静态资源缓存</h3>

<p>我在以前的博客中提到过静态资源 304 的好处，减少流量消耗、加快页面访问等等。如果你使用了 Nginx 作为静态资源服务器的话，那么默认情况下 Nginx 就会帮你处理 304 的情况。</p>

<p>但如果你的 Nginx 是作为反向代理，而你的后端有多台服务器的时候，问题就会变得复杂起来了。稍大的网站都会有不只一台服务器，那么，当浏览器端有某个静态资源的缓存时，用户又发起了一次对这个文件的请求，如果这个请求被反向代理到了另一台服务器，而两台服务器上的文件修改时间不一致时，缓存就会失效。</p>

<p>我大概想了两种解决的方案：一是修改为基于文件哈希的 ETag 来进行缓存判断，二是同步多台服务器上的文件修改时间。</p>

<h3 id="git-如何删除历史提交记录-https-yuhongjun-github-io-tech-2017-04-28-git-e4-bb-93-e5-ba-93-e5-88-a0-e9-99-a4-e6-89-80-e6-9c-89-e6-8f-90-e4-ba-a4-e5-8e-86-e5-8f-b2-e8-ae-b0-e5-bd-95-e6-88-90-e4-b8-ba-e4-b8-80-e4-b8-aa-e5-b9-b2-e5-87-80-e7-9a-84-e6-96-b0-e4-bb-93-e5-ba-93-html"><a href="https://yuhongjun.github.io/tech/2017/04/28/git%E4%BB%93%E5%BA%93%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95-%E6%88%90%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%B9%B2%E5%87%80%E7%9A%84%E6%96%B0%E4%BB%93%E5%BA%93.html">Git 如何删除历史提交记录</a></h3>

<p>很多同学在使用 GitHub 时，会不小心把自己的密码传上去；或者不小心传了一个巨大的文件。此时就可以通过删除 git 的历史提交记录来解决这个问题。</p>

<h3 id="洛谷自动-ac-机-https-github-com-fedoraer-luogujudgehacker"><a href="https://github.com/Fedoraer/LuoguJudgeHacker">洛谷自动 AC 机</a></h3>

<p>这位同学写了一个可以自动 AC 洛谷题目的代码，其原理大概是用 C++ 的宏定义绕过了洛谷的安全检查。</p>

<p>说实话，任何基于字符串匹配的安全检查都是自欺欺人，限制 C++ 的库引入也是做无用功。一个较为安全的评测姬应该至少做以下几种限制：</p>

<ul>
<li>编译、运行 CPU 时间限制</li>
<li>编译、运行墙上时钟时间限制（防止 sleep 卡评测）</li>
<li>内存限制</li>
<li>运行用户权限限制（防止破坏操作和读取敏感数据）</li>
<li>文件访问权限控制（防止读文件 AC）</li>
<li>系统调用限制（防止 fork 炸弹、网络调用等）</li>
</ul>

<p>其他的限制，可以考虑上容器。即使用户代码真的破坏了评测环境，也可以快速恢复，不至于被卡很久。</p>

<h3 id="洛谷日报-32-洛谷第四代评测系统技术分析-https-zhuanlan-zhihu-com-p-42520043"><a href="https://zhuanlan.zhihu.com/p/42520043">【洛谷日报#32】洛谷第四代评测系统技术分析</a></h3>

<p>在被攻击后，洛谷不甘示弱，上了新一代评测系统。</p>

<p>但这个文章并没有涉及多少有关技术的东西，看起来更像是回应挑衅 + 示威。</p>

<h3 id="python-字典长度与哈希冲突的问题">Python 字典长度与哈希冲突的问题</h3>

<p>前阵子我遇到了一个问题，需要用 Python 在内存中维护一个索引，用于加快查询。</p>

<p>键共有三种，当时有两种思路：一种是将对三种键的查询散列生成一个二进制串，然后用这个二进制串做键去存储和查询；另一种思路是直接建立三层的字典。</p>

<p>本来我以为，第一种应该快于第二种的，因为第二种要查询三次才能出一个结果，而第一个只需要一次。而且因为散列过程都是位运算，应该会很快才对。但结果让我很惊讶：十万数据量的情况下，第二种方法比第一种快接近二百倍！</p>

<p>后来看了很多博客才明白为什么，这里就直接放结论：因为 Python 的字典的查找方式可能会出现冲突，多个键从右往左相同的越多，冲突就会越厉害。</p>

<h3 id="使用-a-标签时-你可能会忽略的一个安全问题-https-www-tuicool-com-articles-f2qfvnj"><a href="https://www.tuicool.com/articles/f2QFVnj">使用<a>标签时，你可能会忽略的一个安全问题</a></h3>

<p>这个是我之前从来都没有想过，但是细思极恐的一个问题。</p>

<h2 id="表情包">表情包</h2>

<h3 id="送你们的新年特辑">送你们的新年特辑</h3>

<p><img src="/weekly11/214.jpg" alt="" /></p>

<p><img src="/weekly11/code_or_girl.gif" alt="" /></p>

<p><img src="/weekly11/gaobai.jpg" alt="" /></p>

<p><img src="/weekly11/nve.jpg" alt="" /></p>

<p><img src="/weekly11/please.jpg" alt="" /></p>

<p><img src="/weekly11/shuijiao.jpg" alt="" /></p>

<p><img src="/weekly11/sizhai.jpg" alt="" /></p>

<p><img src="/weekly11/zhentou.jpg" alt="" /></p>

<h2 id="歌曲分享">歌曲分享</h2>

<h3 id="送你们的-魔鬼中的天使">送你们的《魔鬼中的天使》</h3>

<p><audio src="/weekly11/魔鬼中的天使.m4a" controls="controls">
Your browser does not support the audio tag.
</audio></p></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://weekly.meik2333.com/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://weekly.meik2333.com/js/github-style.js"></script>



</html>